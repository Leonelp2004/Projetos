<!DOCTYPE html>

<html lang="pt">
<head>
  <meta name="viewport" content="width=390, height=844, user-scalable=no"/>
<link href="css/registo.css" rel="stylesheet"/>
<meta charset="utf-8"/>
<meta content="width=390, height=844, user-scalable=no" name="viewport"/>
<link rel="icon" type="image/png" href="assets/LogoEyes.png">
<title>Registar OcorrÃªncia</title>
<link href="css/registo.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<link href="css/inicial.css" rel="stylesheet"/><link href="https://unpkg.com/leaflet/dist/leaflet.css" rel="stylesheet"/>
</head>
<body>
<div class="app-container">
<div class="bg-circle1"></div>
<div class="bg-circle2"></div>

  <button class="btn-back" onclick="history.back()">
    <img src="https://img.icons8.com/ios-filled/24/ffffff/chevron-left.png" alt="Voltar"/>
  </button>
<div class="form-container">
<h1>Registar OcorrÃªncia</h1>

<form id="formulario" onsubmit="adicionarPontos(event)">
<label for="tipoOcorrencia">Tipo de OcorrÃªncia</label>
<select id="tipoOcorrencia" name="tipoOcorrencia" class="dropdown">
  <option>Selecione o Tipo de OcorrÃªncia</option>
  <option>Estacionamento irregular</option>
  <option>Estacionamento em lugar reservado</option>
  <option>Estacionamento a restringir a via de circulaÃ§Ã£o</option>
</select>
<div class="mapa-leaflet" id="mapa"></div>
<div class="upload-box">
  <label for="foto-upload" id="uploadLabel">
    <img alt="Upload" src="https://img.icons8.com/ios-filled/50/0A77BC/image.png"/>
    <p id="uploadText">Carregue fotografias, vÃ­deos ou Ã¡udios para<br/>documentar a sua ocorrÃªncia.</p>
  </label>

  <input accept="image/*,video/*,audio/*" id="foto-upload" multiple style="display:none" type="file"/>

  <!-- Apenas uma div com este ID -->
  <div class="preview-container" id="previewContainer"></div>
</div>
<label for="descricao">DescriÃ§Ã£o</label>
<div class="textarea-wrapper">
<textarea id="descricao" maxlength="360" oninput="atualizarContadorDescricao()" placeholder="DescriÃ§Ã£o da OcorrÃªncia. Inclua a matrÃ­cula caso ache necessÃ¡rio"></textarea>
<span id="contador-desc">0/360</span>
</div><label for="observacoes">ObservaÃ§Ãµes</label>
<div class="input-wrapper">
<textarea id="observacoes" maxlength="180" oninput="atualizarContador()" placeholder="Escreva uma observaÃ§Ã£o (opcional)" ></textarea> 
<span id="contador">0/360</span>
</div>

<button class="submit">ðŸ“¸ Submeter OcorrÃªncia</button>
</div>
</div>
<!-- Barra de navegaÃ§Ã£o inferior -->
<div class="bottom-nav">
  <a class="nav-item" href="inicial.html">
    <img src="https://img.icons8.com/fluency-systems-filled/24/0A77BC/home.png" alt="InÃ­cio"/>
    <span>InÃ­cio</span>
  </a>
  <a class="nav-item active" href="registo.html">
    <img src="https://img.icons8.com/fluency-systems-filled/24/0A77BC/plus-math.png" alt="Registar"/>
    <span>Registar</span>
  </a>
  <a class="nav-item" href="historico.html">
    <img src="https://img.icons8.com/fluency-systems-filled/24/0A77BC/time-machine.png" alt="HistÃ³rico"/>
    <span>HistÃ³rico</span>
  </a>
  <a class="nav-item" href="pontos.html">
    <img src="https://img.icons8.com/fluency-systems-filled/24/0A77BC/star.png" alt="Pontos"/>
    <span>Pontos</span>
  </a>
</div>


<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
 
  function atualizarContadorDescricao() {
    const textarea = document.getElementById("descricao");
    const contador = document.getElementById("contador-desc");
    contador.textContent = textarea.value.length + "/360";
  } 
  function atualizarContador() {
    const input = document.getElementById("observacoes");
    const contador = document.getElementById("contador");
    contador.textContent = input.value.length + "/180";
  }

</script>
<!-- Toastify CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

<!-- Toastify JS -->
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

<script>
  window.mostrarToast = function (mensagem, cor = "#0A77BC") {
    Toastify({
      text: mensagem,
      duration: 3000,
      gravity: "top",
      position: "center",
      style: { background: cor }
    }).showToast();
  }
</script>
<script type="module" src="js/registo.js"></script>
</body>
</html>
